http {
    lua_package_path "/path/to/lua/scripts/?.lua;;";

    init_by_lua_block {
        tracing = require("tracing").new()
    }

    server {
        listen 80;

        access_by_lua_block {
            local span = tracing:create_span("request_span")
            -- Set any additional span attributes here
        }

        location / {
            # Your server configuration
        }

        log_by_lua_block {
            local span = tracing.spans[#tracing.spans]  -- Get the last created span
            tracing:end_span(span)
            local trace_data = tracing:export_span(span)
            tracing:send_trace_to_collector(trace_data)
        }
    }
}
